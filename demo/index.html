<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Navigo</title>
  <link href='https://fonts.googleapis.com/css?family=Exo+2:400,200italic' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="./styles.css" />

  <script type="text/content" id="content-about">
    <p class="big center u-mb">
      Lightweight JavaScript router<br />
      <small>It does only one thing -<br />it maps a URL to a function.<br />That&#39;s it!</small>
    </p>
    <p>
      <ul>
        <li>Small file size. ~3KB minified</li>
        <li>No dependencies.</li>
        <li>Uses <a href="https://developer.mozilla.org/en-US/docs/Web/API/History_API" target="_blank">History API</a></li>
        <li><strike>Fallbacks to the good old hash based routing if History API is not supported</strike></li>
      </ul></p>
    <p>
    <hr />
    <p>GitHub repository: <a href="https://github.com/krasimir/navigo" target="_blank">https://github.com/krasimir/navigo</a></p>
    <p><iframe src="https://ghbtns.com/github-btn.html?user=krasimir&repo=navigo&type=star&count=true&size=large" frameborder="0" scrolling="0" width="160px" height="30px"></iframe></p>
  </script>

  <script type="text/content" id="content-usage">
    <p class="big">Getting started</p>
    <p>Install the library via npm:</p>
    <pre>npm install navigo</pre>
    <p class="no-margin">
      Or download the browser-ready version from the following links:
    </p>
    <ul>
      <li><a href="https://raw.githubusercontent.com/krasimir/navigo/master/lib/navigo.js" target="_blank">navigo.js</a></li>
      <li><a href="https://raw.githubusercontent.com/krasimir/navigo/master/lib/navigo.min.js" target="_blank">navigo.min.js</a></li>
    </ul>
    <p>Then simply create an instance:</p>
    <pre>var router = new Navigo();</pre>
    <p class="big">Adding a route</p>
    <p>There are several way to register a new route:</p>
    <pre>router.on('/something/here', function () {
  ...
});

router.on(/^app\/(\d)$/, function () {
  ...
});

router.on({
  'something/here': function () {
    ...
  }
});

router.on(function() {
  // ... all the urls end here
});
</pre>
    <p>As every routing library Navigo supports parameterized URLS:</p>
    <pre>router.on('/user/:id/:action', function (params) {
  // If we have http://site.com/user/42/save as a url then
  // params.id = 42
  // params.action = save
});

router.on(/users\/(\d+)\/(\w+)\/?/, function (id, action) {
  // If we have http://site.com/user/42/save as a url then
  // id = 42
  // action = save
});</pre>
    <p class="big">Moving to another page</p>
    <pre>router.navigate('some/other/url');</pre>
  </script>

  <script type="text/content" id="content-download">
    <p class="big">Download</p>
    <pre>npm install navigo</pre>
    <p>or</p>
    <ul>
      <li><a href="https://raw.githubusercontent.com/krasimir/navigo/master/lib/navigo.js" target="_blank">navigo.js</a> (raw source)</li>
      <li><a href="https://raw.githubusercontent.com/krasimir/navigo/master/lib/navigo.min.js" target="_blank">navigo.min.js</a> (minified)</li>
    </ul>
  </script>
  <script type="text/content" id="content-try-it">
    <p class="big">Try it</p>
    <p>The following JSBin demonstrates most of the Navigo&#39;s features:</p>
  </script>

</head>
<body>
  <div class="container">
    <h1>Navigo</h1>
    <nav>
      <a href="javascript:void(0);" data-switchto="about">About</a>
      <a href="javascript:void(0);" data-switchto="usage">Usage</a>
      <a href="javascript:void(0);" data-switchto="download">Download</a>
      <a href="javascript:void(0);" data-switchto="try-it">Try it</a>
    </nav>
    <div class="js-content content"></div>
    <footer><a href="https://github.com/krasimir/navigo">github.com/krasimir/navigo</a></footer>
  </div>
  <div class="mode-trigger js-mode-trigger">
    <a href="javascript: void(0);">
      <input type="checkbox" /> hash based routing
    </a>
  </div>
  <script src="http://home.dev/Krasimir/navigo/lib/navigo.js"></script>
  <script>
    var router;

    var handleClick = function (selector, func) {
      document.querySelector(selector).addEventListener('click', function (e) {
        e.preventDefault();
        func();
      });
    };

    var el = function(sel) {
      return document.querySelector(sel);
    }

    var setContent = function(id) {
      el('.js-content').innerHTML = el('#content-' + id).innerHTML;
    };

    window.onload = function () {

      // mode triggering
      var trigger = el('.js-mode-trigger');
      var mode = 'history-api';
      var isLocalStorageSupported = !!window.localStorage;
      var rerenderTrigger = function (mode) {
        trigger.querySelector('input').checked = mode === 'hash';
      };

      if (isLocalStorageSupported) {
        mode = localStorage.getItem('navigo') || mode;
      }
      rerenderTrigger(mode);

      trigger.addEventListener('click', function () {
        mode = mode === 'history-api' ? 'hash' : 'history-api';
        isLocalStorageSupported && localStorage.setItem('navigo', mode);
        window.location.href = router.root.replace('#', '');
        setTimeout(function () {
          window.location.reload(true);
        }, 200);
      });

      // routing

      router = new Navigo(null, mode === 'hash');
      router.on({
        'usage': function () {
          setContent('usage');
        },
        'download': function () {
          setContent('download');
        },
        'about': function () {
          setContent('about');
        },
        'try-it': function () {
          setContent('try-it');
        }
      });
      router.on(function() {
        setContent('about');
      });

      []
      .slice
      .call(document.querySelectorAll('nav a'))
      .forEach(function (link) {
        link.addEventListener('click', function (e) {
          e.preventDefault();
          router.navigate(link.getAttribute('data-switchto'));
        });
      });

    }
  </script>
</body>
</html>